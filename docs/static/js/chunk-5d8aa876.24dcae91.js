(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5d8aa876"],{"088e":function(t,e,i){},"0db7":function(t,e,i){"use strict";i("2563")},"24d7":function(t,e,i){},2563:function(t,e,i){},"27d4":function(t,e,i){"use strict";i.d(e,"d",(function(){return o})),i.d(e,"a",(function(){return r})),i.d(e,"b",(function(){return l})),i.d(e,"c",(function(){return c}));i("d81d"),i("b0c0"),i("07ac");var n=i("ed08"),a=i("c3cc"),o=function(){return Object(n["d"])(s.$editProp)},s={$id:"",$type:{_typeId:"",_template:"",_templateAttr:"",_title:""},$property:{_x:0,_y:0,_height:3,_width:3,_minWidth:3,_minHeight:3,_name:"",_visible:"",_opacity:"",_backgroundColor:"rgba(255, 255, 255, 255)",_defaultWidth:3,_defaultHeight:3},$dataSource:{type:"static",request_url:"",data:[]},$editProp:{selected:!1,disconnected:!1,locked:!1}},r={text:Object(n["c"])({},s,{$type:{_typeId:"text",_template:"ItemText",_templateAttr:"ItemTextAttr",_title:"text"},$property:{_defaultWidth:6,_defaultHeight:1,_minWidth:3,_minHeight:1,_backgroundColor:"#EEE",title:{show:!0,text:"Text",fontColor:"rgb(11, 71, 194)",fontSize:18,fontWeight:"normal",textTransform:"none",textAlign:"center",fontFamily:"inherit",italic:!1,underline:!1,bold:!0}}})};a["a"].map((function(t){r[t.name]=Object(n["c"])({},s,{$type:{_typeId:t.name,_template:t.component,_templateAttr:"ChartAttr",_title:t.name},$property:{_defaultWidth:6,_defaultHeight:6,option:t.option}})}));var l=Object.values(r);function c(t){if(t in r)return r[t]}},"2b00":function(t,e,i){"use strict";i("24d7")},"2bac":function(t,e,i){"use strict";i("4ca5")},"4ca5":function(t,e,i){},6115:function(t,e,i){"use strict";i("088e")},6161:function(t,e,i){},"6f66":function(t,e,i){"use strict";i("d920")},"6fb3":function(t,e,i){},"851b":function(t,e,i){"use strict";i("cb03")},"8f46":function(t,e,i){},"91a1":function(t,e,i){"use strict";i("e99a")},"9ff1":function(t,e,i){"use strict";i("d97f")},a486:function(t,e,i){"use strict";i.r(e);var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("fullscreen",{ref:"fullscreen",staticClass:"fullscreen",attrs:{fullscreen:t.fullscreen,background:"#EEE"},on:{"update:fullscreen":function(e){t.fullscreen=e}}},[i("transition",{attrs:{name:"fade"}},[t.isLoading?i("splash-screen",{attrs:{"margin-top":"50%"}}):t._e()],1),i("div",{staticClass:"dashboard-editor-main"},[i("div",{staticClass:"dashboard-editor-main__title",attrs:{id:"title"}},[i("div",{staticClass:"nav-tools"},[i("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"developing...",placement:"bottom"}},[i("div",{staticClass:"feature-info",staticStyle:{"widt h":"25px",margin:"0","margin-right":"20px",position:"relative"}},[i("i",{staticClass:"fa fa-warning",attrs:{"aria-hidden":"true"}}),i("div",{staticClass:"badge"},[t._v("5")])])]),i("div",{staticClass:"feature-info"},[i("lang-select-popover",{staticClass:"feature-info__lang"})],1)],1)]),i("div",{staticClass:"side-panel"},[i("side-tab",{attrs:{title:[t.$t("Project_Editor.PAGES")]}},[i("pages",{attrs:{slot:"first"},slot:"first"})],1),i("side-tab",{attrs:{title:[t.$t("Project_Editor.WIDGETS"),t.$t("Project_Editor.LAYERS")]}},[i("widgets",{attrs:{slot:"first"},slot:"first"}),i("layer",{attrs:{slot:"second"},slot:"second"})],1)],1),i("div",{staticClass:"dashboard-editor-main__nav-tool",class:{"sidebar--open":t.isSidebarOpen}},[i("ul",{staticClass:"tools-wrapper"},[i("li",[i("div",{staticClass:"btn-icon",on:{click:t.save}},[i("svg-icon",{attrs:{"icon-class":"save"}})],1)]),i("li",[i("div",{staticClass:"btn-icon",class:{disabled:0===t.widgetSelected.length},on:{click:t.deleteWidget}},[i("svg-icon",{attrs:{"icon-class":"trash"}})],1)]),i("li",{directives:[{name:"shortkey",rawName:"v-shortkey",value:["ctrl","z"],expression:"['ctrl', 'z']"}],on:{shortkey:function(e){return t.$store.dispatch("editor/undo")}}},[i("div",{staticClass:"btn-icon",class:{disabled:!t.isUndoEnabled},on:{click:function(e){return t.$store.dispatch("editor/undo")}}},[i("svg-icon",{attrs:{"icon-class":"undo"}})],1)]),i("li",{directives:[{name:"shortkey",rawName:"v-shortkey",value:["ctrl","y"],expression:"['ctrl', 'y']"}],on:{shortkey:function(e){return t.$store.dispatch("editor/redo")}}},[i("div",{staticClass:"btn-icon",class:{disabled:!t.isRedoEnabled},on:{click:function(e){return t.$store.dispatch("editor/redo")}}},[i("svg-icon",{attrs:{"icon-class":"redo"}})],1)]),i("li",{directives:[{name:"shortkey",rawName:"v-shortkey",value:{windows:["ctrl","c"],mac:["meta","c"]},expression:"{ windows: ['ctrl', 'c'], mac: ['meta', 'c'] }"}],on:{shortkey:function(e){return t.copyWidget()}}},[i("div",{staticClass:"btn-icon",class:{disabled:0===t.widgetSelected.length},on:{click:t.copyWidget}},[i("svg-icon",{attrs:{"icon-class":"copy"}})],1)]),i("li",{directives:[{name:"shortkey",rawName:"v-shortkey",value:{windows:["ctrl","v"],mac:["meta","v"]},expression:"{ windows: ['ctrl', 'v'], mac: ['meta', 'v'] }"}],on:{shortkey:function(e){return t.pasteWidget()}}},[i("div",{staticClass:"btn-icon",class:{disabled:0===t.widgetCopied.length},on:{click:t.pasteWidget}},[i("svg-icon",{attrs:{"icon-class":"paste"}})],1)]),i("li",[i("div",{staticClass:"btn-icon",class:{disabled:0===t.widgetSelectedWithUnLock.length},on:{click:t.lockWidget}},[i("svg-icon",{attrs:{"icon-class":"widget-lock"}})],1)]),i("li",[i("div",{staticClass:"btn-icon",class:{disabled:0===t.widgetSelectedWithLock.length},on:{click:t.unlockWidget}},[i("svg-icon",{attrs:{"icon-class":"widget-unlock"}})],1)]),i("li",{directives:[{name:"shortkey",rawName:"v-shortkey",value:{windows:["ctrl","a"],mac:["meta","a"]},expression:"{ windows: ['ctrl', 'a'], mac: ['meta', 'a'] }"}],on:{shortkey:function(e){return t.selectAllWidget()}}}),i("li",{staticStyle:{float:"right","margin-right":"15px"}},[i("div",{staticClass:"btn-icon-right",on:{click:t.preview}},[t._v(" "+t._s(t.$t("Project_Editor.Preview"))+" ")])])])]),i("div",{staticClass:"dashboard-editor-main__content",class:{"sidebar--open":t.isSidebarOpen}},[i("div",{staticClass:"work-area-page-tab"},[i("el-tabs",{attrs:{type:"card"},on:{"tab-click":t.handleTabClick},model:{value:t.pageTab,callback:function(e){t.pageTab=e},expression:"pageTab"}},t._l(t.pageTabs,(function(t){return i("el-tab-pane",{key:t.id,attrs:{label:t.label,name:t.id}})})),1),i("el-popover",{attrs:{placement:"bottom",title:t.$t("Project_Editor.Shortcut"),width:"300",trigger:"click"}},[i("div",{staticClass:"helper-content"},[i("hr"),i("ul",[i("li",[i("kbd",[t._v("⌘")]),t._v("/"),i("kbd",[t._v("Ctrl")]),t._v("+"),i("kbd",[t._v("A")]),t._v(" "+t._s(t.$t("Project_Editor.Select_All"))+" ")]),i("li",[i("kbd",[t._v("⌘")]),t._v("/"),i("kbd",[t._v("Ctrl")]),t._v("+"),i("kbd",[t._v("C")]),t._v(" "+t._s(t.$t("Project_Editor.Copy"))+" ")]),i("li",[i("kbd",[t._v("⌘")]),t._v("/"),i("kbd",[t._v("Ctrl")]),t._v("+"),i("kbd",[t._v("V")]),t._v(" "+t._s(t.$t("Project_Editor.Paste"))+" ")]),i("li",[i("kbd",[t._v("⌘")]),t._v("/"),i("kbd",[t._v("Ctrl")]),t._v("+"),i("kbd",[t._v("Z")]),t._v(" "+t._s(t.$t("Project_Editor.Undo"))+" ")]),i("li",[i("kbd",[t._v("⌘")]),t._v("/"),i("kbd",[t._v("Ctrl")]),t._v("+"),i("kbd",[t._v("Y")]),t._v(" "+t._s(t.$t("Project_Editor.Redo"))+" ")]),i("li",[i("kbd",[t._v("space")]),t._v("+ "),i("i",{staticClass:"el-icon-mouse"}),i("span",{staticStyle:{"margin-left":"10px"}},[t._v(" "+t._s(t.$t("Project_Editor.Move_Viewports"))+" ")])])])]),i("div",{staticClass:"helper",attrs:{slot:"reference"},slot:"reference"},[i("svg-icon",{attrs:{"icon-class":"question-mark"}})],1)])],1),i("div",{staticClass:"work-area-page-view"},[i("div",{staticClass:"content-wrapper",style:{transform:"scale("+t.editScale+")",width:"calc(100% / "+t.editScale+")",height:"calc(100% / "+t.editScale+")"}},[t.isRulerShow?i("div",{staticClass:"ruler ruler-top",attrs:{id:"rulerTop"}},[i("div",{staticClass:"ruler-wrapper"},t._l(t.rulerMarker,(function(e,n){return i("label",{key:n,style:{left:100*n+"px"}},[t._v(t._s(100*e))])})),0)]):t._e(),t.isRulerShow?i("div",{staticClass:"ruler ruler-left",attrs:{id:"rulerLeft"}},[i("div",{staticClass:"ruler-wrapper"},t._l(t.rulerMarker,(function(e,n){return i("label",{key:n,style:{top:100*n+"px"}},[t._v(t._s(100*e))])})),0)]):t._e(),i("div",{ref:"content",staticClass:"work-area-wrapper",attrs:{id:"content"}},[i("work-area",{ref:"workArea"})],1)])]),i("div",{staticClass:"work-area-view-option"},[i("div",{staticClass:"center-bottom-option"},[i("div",{staticClass:"fullscreen-button",on:{click:t.toggle}},[i("svg-icon",{attrs:{"icon-class":"fullscreen"}})],1),i("div",{staticClass:"scale-slider-button",class:{"scale-slider-button__disabled":t.editScale<=.5},on:{click:function(e){return t.zoomOut()}}},[i("svg-icon",{attrs:{"icon-class":"minus"}})],1),i("div",{staticClass:"scale-slider"},[i("el-slider",{attrs:{step:.25,min:.5,max:1.5},model:{value:t.editScale,callback:function(e){t.editScale=e},expression:"editScale"}})],1),i("div",{staticClass:"scale-slider-button",class:{"scale-slider-button__disabled":t.editScale>=1.5},on:{click:function(e){return t.zoomIn()}}},[i("svg-icon",{attrs:{"icon-class":"plus"}})],1),i("div",{staticClass:"scale-value"},[t._v(t._s(100*t.editScale)+" %")])])])]),i("div",{staticClass:"dashboard-editor-main__sidebar",class:{"sidebar--open":t.isSidebarOpen}},[i("div",{staticClass:"dashboard-editor-main__sidebar__wrapper"},[i("div",{staticClass:"dashboard-editor-main__sidebar__hanlderbar",on:{click:function(e){return t.$store.commit("editor/TOGGLE_SIDEBAR")}}},[i("div",{staticClass:"dashboard-editor-main__sidebar__hanlderbar__background"},[i("svg",{attrs:{width:"14",height:"80",xmlns:"http://www.w3.org/2000/svg"}},[i("path",{attrs:{fill:"#f5f7f8",d:"M14 0v80C6.268 80 0 73.732 0 66V14C0 6.268 6.268 0 14 0z"}})])]),i("div",{staticClass:"dashboard-editor-main__sidebar__hanlderbar__icon"},[t.isSidebarOpen?t._e():i("svg-icon",{attrs:{"icon-class":"arrow-left"}}),t.isSidebarOpen?i("svg-icon",{attrs:{"icon-class":"arrow-right"}}):t._e()],1)]),i("div",{staticClass:"dashboard-editor-main__sidebar__content"},[1==t.widgetSelected.length?i(t.widgetSelected[0].$type._templateAttr,{tag:"component",attrs:{widget:t.widgetSelected[0]},on:{save:t.saveWidgetItemSetting,selectAssets:t.openSelectAssetsModal}}):i("page-attr",{attrs:{dashboard:t.editFile.content[t.currentTabIndex]}})],1)])]),i("Modal",{attrs:{"is-show":t.isEditorModalShow,width:600},on:{close:function(e){t.isEditorModalShow=!1}},scopedSlots:t._u([{key:"header",fn:function(){return[t._v("dev mode")]},proxy:!0},{key:"content",fn:function(){return[i("v-jsoneditor",{attrs:{plus:!1,height:"400px"},model:{value:t.tempJson,callback:function(e){t.tempJson=e},expression:"tempJson"}})]},proxy:!0},{key:"footer",fn:function(){return[i("el-button",{staticClass:"original-style",staticStyle:{"min-width":"80px"},on:{click:t.saveDevModal}},[t._v("Ok")]),i("el-button",{staticClass:"original-style",staticStyle:{"min-width":"80px"},on:{click:t.canceDevlModal}},[t._v("Cancel")])]},proxy:!0}])}),i("Modal",{attrs:{"is-show":t.assetsSelection.isModalShow,width:750},on:{close:t.cancelWidgetAssetsSelectedModal},scopedSlots:t._u([{key:"header",fn:function(){return[t._v("assets")]},proxy:!0},{key:"content",fn:function(){return[i("assetSelection",{on:{update:t.updateAssetSelection}})]},proxy:!0},{key:"footer",fn:function(){return[i("el-button",{staticClass:"original-style",staticStyle:{"min-width":"80px"},on:{click:t.saveWidgetAssetsSelectedModal}},[t._v("Ok")]),i("el-button",{staticClass:"original-style",staticStyle:{"min-width":"80px"},on:{click:t.cancelWidgetAssetsSelectedModal}},[t._v("Cancel")])]},proxy:!0}])})],1)],1)},a=[],o=(i("4de4"),i("c740"),i("d81d"),i("d3b7"),i("ddb0"),i("96cf"),i("1da1")),s=i("2909"),r=i("cb15"),l=i("ed08"),c=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"work-area-container"},[i("div",{ref:"workArea",staticClass:"work-area",style:{width:t.colNum*t.defaultGridSize+t.defaultWidgetMargin+"px"},attrs:{id:"workArea"},on:{contextmenu:t.openContextmenu}},[t.panMove.isPanMode?i("div",{staticClass:"pan-layer"}):t._e(),t.multiDrag.isDragging&&t.widgetSelectedWithUnLock.length>1?i("div",{staticClass:"multi-drag-ghost ",style:{width:t.defaultGridSize*parseInt(t.multiDragRec.width)+10+"px",top:t.multiDrag.top+"px",left:t.multiDrag.left+"px"},attrs:{title:t.multiDrag.top+" , "+t.multiDrag.left}},[i("div",{staticClass:"multi-drag-ghost__wrapper",class:{"multi-drag-ghost__wrapper--warning":t.isCollision}},[i("div",{staticClass:"multi-drag-ghost__overlay"}),i("grid-layout",{ref:"multidragLayout",staticClass:"multi-drag-ghost__layout",attrs:{layout:t.multiDragComps,"col-num":parseInt(t.multiDragRec.width),"row-height":t.defaultWidgetSize,"is-draggable":!1,"is-resizable":!1,"prevent-collision":!0,"vertical-compact":!1,"use-css-transforms":!1,responsive:!1,margin:[t.defaultWidgetMargin,t.defaultWidgetMargin]}},t._l(t.multiDragComps,(function(t,e){return i("grid-item",{key:t.i+e,attrs:{x:t.x,y:t.y,w:t.w,h:t.h,i:t.i}},[i("div",{staticClass:"widget-content widget-content--selected"})])})),1)],1)]):t._e(),i("div",{ref:"dropLayer",staticClass:"layout-wrapper",class:{"is-grid":t.$store.state.editor.viewOption.isGrid},style:{"min-height":2*t.workAreaSize.height+"px","--aux-height":t.pageAttrAuxiliaryLine.height+"px","--aux-width":t.pageAttrAuxiliaryLine.width+"px"},on:{dragover:function(e){return e.preventDefault(),t.handleDragOver(e)},dragenter:t.handleDragEnter,dragleave:t.handleDragLeave,dragEnd:t.handleDragEnd,drop:function(e){return e.preventDefault(),t.handleWidgetDrop(e)}}},[i("grid-layout",{ref:"layout",staticClass:"layout",attrs:{id:"gridLayout",layout:t.widgetComps,"col-num":parseInt(t.colNum),"row-height":t.defaultWidgetSize,"is-draggable":t.isDraggable,"is-resizable":t.isResizable,"prevent-collision":t.isPreventCollision,"vertical-compact":!1,"use-css-transforms":!1,responsive:!1,margin:[t.defaultWidgetMargin,t.defaultWidgetMargin],"is-collision":t.isCollision},on:{"update:layout":function(e){t.widgetComps=e},"update:isCollision":function(e){t.isCollision=e},"update:is-collision":function(e){t.isCollision=e},"layout-created":t.layoutCreatedEvent,"layout-before-mount":t.layoutBeforeMountEvent,"layout-mounted":t.layoutMountedEvent,"layout-ready":t.layoutReadyEvent,"layout-updated":t.layoutUpdatedEvent}},t._l(t.widgetComps,(function(e,n){return i("grid-item",{key:e.i+n,class:{"widget--multi-dragging":e.$editProp.selected&&t.multiDrag.isDragging&&t.widgetSelectedWithUnLock.length>1&&!e.$editProp.locked,"widget--locked":e.$editProp.locked},attrs:{x:e.x,y:e.y,w:e.w,h:e.h,i:e.i,"is-selected":e.$editProp.selected,"min-w":e.minW,"min-h":e.minH,scale:t.editScale,static:e.$editProp.locked},on:{resize:t.resize,move:t.move,resized:t.resized,"container-resized":t.containerResized,moved:t.moved}},[i("div",{staticClass:"single-drag-ghost__overlay",class:{"single-drag-ghost__overlay--collision":e.$editProp.selected&&t.isCollision}}),i("div",{staticClass:"widget-control-tools"},[e.$editProp.locked?i("span",[i("i",{staticClass:"el-icon-lock"})]):t._e()]),i("div",{staticClass:"widget-content",class:{"widget-content--selected":e.$editProp.selected}},[i(e.$type._template,{tag:"component",attrs:{mode:"editor",config:e},on:{openSettingModal:t.openSettingModal}})],1)])})),1)],1)]),i("v-contextmenu",{ref:"contextmenuAll"},[i("v-contextmenu-item",{attrs:{disabled:0===t.widgetSelected.length},on:{click:t.copyWidgetContextmenu}},[t._v(t._s(t.$t("Project_Editor.Copy")))]),i("v-contextmenu-item",{attrs:{disabled:"blank"!==t.contextmenu.mode||0===t.widgetCopied.length},on:{click:t.pasteWidgetContextmenu}},[t._v(t._s(t.$t("Project_Editor.Paste_here")))]),i("v-contextmenu-item",{attrs:{disabled:0===t.widgetSelected.length||"blank"===t.contextmenu.mode||t.contextmenu.lock.isLockShow},on:{click:t.lockWidgetContextmenu}},[t._v(t._s(t.$t("Project_Editor.Lock")))]),i("v-contextmenu-item",{attrs:{disabled:0===t.widgetSelected.length||"blank"===t.contextmenu.mode||t.contextmenu.lock.isUnlockShow},on:{click:t.unlockWidgetContextmenu}},[t._v(t._s(t.$t("Project_Editor.Unlock")))]),i("v-contextmenu-item",{attrs:{disabled:0===t.widgetSelected.length||"blank"===t.contextmenu.mode},on:{click:t.deleteWidgetContextmenu}},[t._v(t._s(t.$t("Project_Editor.Delete")))])],1)],1)},d=[],u=(i("99af"),i("cb29"),i("7db0"),i("4160"),i("c975"),i("a434"),i("b680"),i("ac1f"),i("5319"),i("159b"),i("b85c")),h=i("5530"),g=i("84c2"),p=i("899b"),f=(i("f89b"),i("27d4")),m=i("ec26"),v=i("f8b1"),_=i.n(v),y=(i("caad"),i("2532"),i("53ca")),b=i("3835");i("a630"),i("fb6a"),i("4fad"),i("3ca3");function w(t,e,i,n){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};e instanceof HTMLCollection||e instanceof NodeList?e=Array.from(e):Array.isArray(e)||(e=[e]),Array.isArray(i)||(i=[i]);var o,s=Object(u["a"])(e);try{for(s.s();!(o=s.n()).done;){var r,l=o.value,c=Object(u["a"])(i);try{for(c.s();!(r=c.n()).done;){var d=r.value;l[t](d,n,Object(h["a"])({capture:!1},a))}}catch(g){c.e(g)}finally{c.f()}}}catch(g){s.e(g)}finally{s.f()}return Array.prototype.slice.call(arguments,1)}var S=w.bind(null,"addEventListener"),x=w.bind(null,"removeEventListener"),C=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"px";return"number"===typeof t?t+e:t};function $(t,e,i){var n=t&&t.style;if(n)if("object"===Object(y["a"])(e))for(var a=0,o=Object.entries(e);a<o.length;a++){var s=Object(b["a"])(o[a],2),r=s[0],l=s[1];n[r]=C(l)}else i&&"string"===typeof e&&(n[e]=C(i))}function k(t,e,i){switch(i||"touch"){case"center":var n=e.left+e.width/2,a=e.top+e.height/2;return n>=t.left&&n<=t.right&&a>=t.top&&a<=t.bottom;case"cover":return e.left>=t.left&&e.top>=t.top&&e.right<=t.right&&e.bottom<=t.bottom;case"touch":return t.right>=e.left&&t.left<=e.right&&t.bottom>=e.top&&t.top<=e.bottom;default:throw new Error("Unkown intersection mode: ".concat(i))}}function E(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document;Array.isArray(t)||(t=[t]);for(var i=[],n=0,a=t.length;n<a;n++){var o=t[n];"string"===typeof o?i.push.apply(i,Object(s["a"])(e.querySelectorAll(o))):o instanceof e.defaultView.HTMLElement&&i.push(o)}return i}function W(t){var e=t.path||t.composedPath&&t.composedPath();if(e&&e.length>0)return e;var i=t.target;for(e=[i];i=i.parentElement;)e.push(i);return e.push(document,window),e}function M(t,e){var i=t.indexOf(e);~i&&t.splice(i,1)}function T(t){var e=t.touches&&t.touches[0]||t;return{tap:e,x:e.clientX,y:e.clientY,target:e.target}}var A=Math.abs,D=Math.max,L=Math.min,I=Math.round,O=Math.ceil,P=function(t){return t.preventDefault()},j="undefined"===typeof window.DOMRect?window.ClientRect:window.DOMRect;function R(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e={options:Object.assign({class:"selection-area",frame:document,mode:"touch",tapMode:"native",startThreshold:10,singleClick:!0,disableTouch:!1,selectables:[],scrollSpeedDivider:10,manualScrollSpeed:750,startareas:["html"],boundaries:["html"],selectionAreaContainer:"body"},t),_stored:[],_selectables:[],_selected:[],_changed:{added:[],removed:[]},_eventListener:{beforestart:[],start:[],move:[],stop:[]},_area:null,_areaDomRect:null,_clippingElement:null,_scrollAvailable:!0,_scrollSpeed:{x:null,y:null},_init:function(){var t=e.options.frame;e._area=t.createElement("div"),e._clippingElement=t.createElement("div"),e._clippingElement.appendChild(e._area),e._area.classList.add(e.options.class),$(e._area,{willChange:"top, left, bottom, right, width, height",top:0,left:0,position:"fixed"}),$(e._clippingElement,{overflow:"hidden",position:"fixed",transform:"translate3d(0, 0, 0)",pointerEvents:"none",zIndex:"1"}),e.enable()},_bindStartEvents:function(t){var i=e.options.frame,n="on"===t?S:x;n(i,"mousedown",e._onTapStart),e.options.disableTouch||n(i,"touchstart",e._onTapStart,{passive:!1})},_onTapStart:function(t){var i=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=T(t),a=n.x,o=n.y,s=n.target,r=e.options,l=r.startareas,c=r.boundaries,d=r.frame,u=s.getBoundingClientRect(),h=E(l,d);e._boundaries=E(c,d),e._targetContainer=e._boundaries.find((function(t){return k(t.getBoundingClientRect(),u)}));var g=W(t);e._targetContainer&&h.find((function(t){return g.includes(t)}))&&e._boundaries.find((function(t){return g.includes(t)}))&&(i||!1!==e._emit("beforestart",t))&&(e._ax1=a,e._ay1=o,e._ax2=0,e._ay2=0,e._singleClick=!0,e.clearSelection(!1),S(d,"selectstart",P),S(d,["touchmove","mousemove"],e._delayedTapMove,{passive:!1}),S(d,["mouseup","touchcancel","touchend"],e._onTapStop),t.preventDefault())},_onSingleTap:function(t){var i=e.options.tapMode,n=T(t),a=null;if("native"===i)a=n.target;else{if("touch"!==i)throw new Error("Unknown tapMode option: ".concat(i));e.resolveSelectables();var o=n.x,r=n.y;a=e._selectables.find((function(t){var e=t.getBoundingClientRect(),i=e.right,n=e.left,a=e.top,s=e.bottom;return o<i&&o>n&&r<s&&r>a}))}if(!a)return!1;e.resolveSelectables();while(!e._selectables.includes(a)){if(!a.parentElement)return;a=a.parentElement}e._emit("start",t);var l=e._stored;if(t.shiftKey&&l.length){var c=l[l.length-1],d=4&c.compareDocumentPosition(a)?[a,c]:[c,a],u=Object(b["a"])(d,2),h=u[0],g=u[1],p=[].concat(Object(s["a"])(e._selectables.filter((function(t){return 4&t.compareDocumentPosition(h)&&2&t.compareDocumentPosition(g)}))),[a]);e.select(p),e._emit("move",t),e._emit("stop",t)}else e._stored.includes(a)?e.removeFromSelection(a):e.select(a),e._emit("move",t),e._emit("stop",t)},_delayedTapMove:function(t){var i=T(t),n=i.x,a=i.y,o=e.options,s=o.startThreshold,r=o.frame,l=e._ax1,c=e._ay1,d=Object(y["a"])(s);if("number"===d&&A(n+a-(l+c))>=s||"object"===d&&A(n-l)>=s.x||A(a-c)>=s.y){x(r,["mousemove","touchmove"],e._delayedTapMove,{passive:!1}),S(r,["mousemove","touchmove"],e._onTapMove,{passive:!1}),$(e._area,"display","block"),E(e.options.selectionAreaContainer,r)[0].appendChild(e._clippingElement),e.resolveSelectables(),e._singleClick=!1;var u=e._targetBoundary=e._targetContainer.getBoundingClientRect();I(e._targetContainer.scrollHeight)!==I(u.height)||I(e._targetContainer.scrollWidth)!==I(u.width)?(e._scrollAvailable=!0,S(window,"wheel",e._manualScroll,{passive:!1}),e._selectables=e._selectables.filter((function(t){return e._targetContainer.contains(t)})),$(e._clippingElement,{top:u.top,left:u.left,width:u.width,height:u.height}),$(e._area,{marginTop:-u.top,marginLeft:-u.left})):(e._scrollAvailable=!1,$(e._clippingElement,{top:0,left:0,width:"100%",height:"100%"}),$(e._area,{marginTop:0,marginLeft:0})),e._onTapMove(t),e._emit("start",t)}t.preventDefault()},_onTapMove:function(t){var i=T(t),n=i.x,a=i.y,o=e.options.scrollSpeedDivider,s=e._targetContainer,r=e._scrollSpeed;e._ax2=n,e._ay2=a,!e._scrollAvailable||null===r.y&&null===r.x?(e._recalcAreaRect(),e._updatedTouchingElements(),e._emit("move",t),e._redrawArea()):requestAnimationFrame((function i(){r=e._scrollSpeed;var n=null!==r.y,a=null!==r.x;if(n||a){var l=s.scrollTop,c=s.scrollLeft;n&&(s.scrollTop+=O(r.y/o),e._ay1-=s.scrollTop-l),a&&(s.scrollLeft+=O(r.x/o),e._ax1-=s.scrollLeft-c),e._recalcAreaRect(),e._updatedTouchingElements(),e._emit("move",t),e._redrawArea(),requestAnimationFrame(i)}})),t.preventDefault()},_manualScroll:function(t){var i=e.options.manualScrollSpeed,n=t.deltaY?t.deltaY>0?1:-1:0,a=t.deltaX?t.deltaX>0?1:-1:0;e._scrollSpeed.y+=n*i,e._scrollSpeed.x+=a*i,e._onTapMove(t),t.preventDefault()},_recalcAreaRect:function(){var t=e._targetContainer,i=t.scrollTop,n=t.scrollHeight,a=t.clientHeight,o=t.scrollLeft,s=t.scrollWidth,r=t.clientWidth,l=e._targetBoundary,c=e._scrollSpeed,d=e._ax2,u=e._ay2;d<l.left?(c.x=o?-A(l.left-d):null,d=l.left):d>l.left+l.width?(c.x=s-o-r?A(l.left+l.width-d):null,d=l.left+l.width):c.x=null,u<l.top?(c.y=i?-A(l.top-u):null,u=l.top):u>l.top+l.height?(c.y=n-i-a?A(l.top+l.height-u):null,u=l.top+l.height):c.y=null;var h=L(e._ax1,d),g=L(e._ay1,u),p=D(e._ax1,d),f=D(e._ay1,u);e._areaDomRect=new j(h,g,p-h,f-g)},_redrawArea:function(){var t=e._areaDomRect,i=t.x,n=t.y,a=t.width,o=t.height,s=e._area.style;s.transform="translate3d("+i+"px,"+n+"px, 0)",s.width=a+"px",s.height=o+"px"},_onTapStop:function(t,i){var n=e.options,a=n.frame,o=n.singleClick;x(a,["mousemove","touchmove"],e._delayedTapMove),x(a,["touchmove","mousemove"],e._onTapMove),x(a,["mouseup","touchcancel","touchend"],e._onTapStop),t&&e._singleClick&&o?e._onSingleTap(t):e._singleClick||i||(e._updatedTouchingElements(),e._emit("stop",t)),e._scrollSpeed={x:null,y:null},x(window,"wheel",e._manualScroll),e._clippingElement.remove(),x(a,"selectstart",P),$(e._area,"display","none")},_updatedTouchingElements:function(){for(var t=e._selected,i=e._selectables,n=e.options,a=e._areaDomRect,o=n.mode,s=[],r=[],l=[],c=0;c<i.length;c++){var d=i[c];k(a,d.getBoundingClientRect(),o)&&(t.includes(d)||r.push(d),s.push(d))}for(var u=0;u<t.length;u++){var h=t[u];s.includes(h)||l.push(h)}e._selected=s,e._changed={added:r,removed:l}},_emit:function(t,i){var n,a=!0,o=Object(u["a"])(e._eventListener[t]);try{for(o.s();!(n=o.n()).done;){var s=n.value;a=s.call(e,{inst:e,area:e._area,selected:e._selected.concat(e._stored),changed:e._changed,oe:i})&&a}}catch(r){o.e(r)}finally{o.f()}return a},trigger:function(t){var i=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];e._onTapStart(t,i)},on:function(t,i){return e._eventListener[t].push(i),e},off:function(t,i){var n=e._eventListener[t];if(n){var a=n.indexOf(i);~a&&n.splice(a,1)}return e},resolveSelectables:function(){e._selectables=E(e.options.selectables,e.options.frame)},keepSelection:function(){for(var t=e._selected,i=e._stored,n=0;n<t.length;n++){var a=t[n];i.includes(a)||i.push(a)}},clearSelection:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];t&&(e._stored=[]),e._selected=[],e._changed.added=[],e._changed.removed=[]},removeFromSelection:function(t){e._changed.removed.push(t),M(e._stored,t),M(e._selected,t)},getSelection:function(){return e._stored},cancel:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];e._onTapStop(null,!t)},option:function(t,i){var n=e.options;return void 0===i?n[t]:n[t]=i},disable:function(){e._bindStartEvents("off")},destroy:function(){e.disable(),e._clippingElement.remove()},enable:function(){e._bindStartEvents("on")},select:function(t){var i,n,a=e._selected,o=e._stored,r=e.options,l=E(t,r.frame).filter((function(t){return!a.includes(t)&&!o.includes(t)}));return(i=e._selected).push.apply(i,Object(s["a"])(l)),(n=e._changed.added).push.apply(n,Object(s["a"])(l)),l}};return e._init(),e}R.utils={on:S,off:x,css:$,intersects:k,selectAll:E,eventPath:W,removeElement:M},R.create=function(t){return R(t)};var z=R,Y={name:"WorkArea",components:{GridLayout:g["a"].GridLayout,GridItem:g["a"].GridItem,VueContext:p["a"],Modal:r["a"]},data:function(){return{imgGrid:_.a,isPreventCollision:!0,isCollision:!1,multiDrag:{isDragging:!1,left:0,top:0,inOffsetY:0,inOffsetX:0},multiDragRec:{top:0,left:0,bottom:0,right:0,width:0,height:0},multiDragComps:[],layoutDom:{offsetX:0,offsetY:0},selectionArea:{instance:null,isStopEvent:!1,select:{state:!1}},contextmenu:{x:0,y:0,mode:"",lock:{isLockShow:!1,isUnlockShow:!1}},isWidgetDragging:!1,panMove:{isPanMode:!1,drag:{elem:null,x:0,y:0,startX:0,startY:0,state:!1}},scrollInitY:0,scrollDeltaY:0}},computed:{currentTabIndex:function(){return this.$store.state.editor.currentTabIndex},defaultWidgetSize:function(){return this.$store.state.editor.defaultWidgetSize},defaultWidgetMargin:function(){return this.$store.state.editor.defaultWidgetMargin},defaultGridSize:function(){return this.$store.state.editor.defaultWidgetSize+this.$store.state.editor.defaultWidgetMargin},workAreaSize:function(){return this.$store.state.editor.workAreaSize},colNum:function(){return Math.ceil(this.workAreaSize.width/this.defaultGridSize)},pageAttrAuxiliaryLine:function(){return this.$store.state.editor.editFile.content[this.$store.state.editor.currentTabIndex].auxiliaryLine},editScale:function(){return this.$store.state.editor.viewOption.editScale},scaleWidgetSize:function(){return this.defaultGridSize*this.editScale},widgetLayout:{get:function(){return this.$store.getters["editor/widgetLayout"]},set:function(t){this.$store.dispatch("editor/updateLayout",t)}},isDraggable:function(){return!(!this.isPreventCollision&&this.widgetSelected.length>1)},isResizable:function(){return!0},widgetSelected:function(){return this.$store.getters["editor/widgetSelected"]},widgetSelectedWithLock:function(){return this.$store.getters["editor/widgetSelected"].filter((function(t){return!0===t.$editProp.locked}))},widgetSelectedWithUnLock:function(){return this.$store.getters["editor/widgetSelected"].filter((function(t){return!1===t.$editProp.locked}))},widgetCopied:function(){return this.$store.state.editor.widgetCopied},dataSource:function(){return this.$store.state.editor.dataSource},dragging:function(){return this.$store.state.editor.dragging},widgetComps:{get:function(){return this.$store.state.editor.editFile.content[this.currentTabIndex].components},set:function(t){this.$store.commit("editor/SET_WIDGET_COMPONENT",t)}},layoutContainerHeight:function(){return parseInt(this.$refs.layout.containerHeight().replace("px",""))},maxColNum:function(){return Math.max.apply(Math,Object(s["a"])(this.widgetComps.map((function(t){return t.x+t.w}))))},maxRowNum:function(){return Math.max.apply(Math,Object(s["a"])(this.widgetComps.map((function(t){return t.y+t.h}))))},gridComps:function(){var t=this.maxColNum>=0?this.maxColNum:1,e=this.maxRowNum>=0?this.maxRowNum:1,i=new Array(t).fill([]).map((function(){return new Array(e).fill("")}));return this.widgetComps.forEach((function(t){for(var e=0;e<t.w;e++)for(var n=0;n<t.h;n++)i[t.x+e][t.y+n]=t.$id})),i}},watch:{editScale:function(t,e){t!==e&&(this.makeMultiDragRec(),this.makeMultiDragComps())}},created:function(){},beforeDestroy:function(){document.removeEventListener("keydown",this.eventKeydown),document.removeEventListener("keyup",this.eventKeyup),this.$refs.workArea.removeEventListener("mousedown",this.eventMousedown),this.$refs.workArea.removeEventListener("mousemove",this.eventMousemove),this.$refs.workArea.removeEventListener("mouseup",this.eventMouseup),document.removeEventListener("mousedown",this.eventDocumentMouseDown),document.removeEventListener("mousemove",this.eventDocumentMouseMove),document.removeEventListener("mouseup",this.eventDocumentMouseUp),this.eventInit(),this.selectionArea.instance.destroy()},mounted:function(){var t=this;document.addEventListener("keydown",this.eventKeydown),document.addEventListener("keyup",this.eventKeyup),this.$refs.workArea.addEventListener("mousedown",this.eventMousedown),this.$refs.workArea.addEventListener("mousemove",this.eventMousemove),this.$refs.workArea.addEventListener("mouseup",this.eventMouseup),document.addEventListener("mousedown",this.eventDocumentMouseDown),document.addEventListener("mousemove",this.eventDocumentMouseMove),document.addEventListener("mouseup",this.eventDocumentMouseUp),this.layoutDom.offsetX=document.getElementById("gridLayout").getBoundingClientRect().left||document.getElementById("gridLayout").getBoundingClientRect().left,this.layoutDom.offsetY=document.getElementById("gridLayout").getBoundingClientRect().top||document.getElementById("gridLayout").getBoundingClientRect().top,this.selectionArea.instance=z.create({class:"selection-area",disableTouch:!1,singleClick:!0,boundaries:[".work-area-wrapper"]}).on("beforestart",(function(e){e.area;var i=e.inst,n=(e.selected,e.oe);if(2===n.button||1===n.button)return i.cancel(),!1;if(t.panMove.isPanMode)return i.cancel(),!1;var a=document.getElementById("gridLayout").getBoundingClientRect(),o=2,s={x:(n.pageX-o-a.x-(n.pageX-o-a.x)%t.scaleWidgetSize)/t.scaleWidgetSize,y:(n.pageY-o-a.y-(n.pageY-o-a.y)%t.scaleWidgetSize)/t.scaleWidgetSize};if(""!==t.whichWidgetInXY(s.x,s.y))return t.isWidgetSelectedInXY(s.x,s.y)&&t.widgetSelected.length>=1?(n.ctrlKey||n.metaKey)&&t.toggleWidgetByXY(s.x,s.y):0!==t.widgetSelected.length&&t.isWidgetSelectedInXY(s.x,s.y)||(n.ctrlKey||n.metaKey||t.clearSelection(),t.selectWidgetByXY(s.x,s.y)),t.widgetSelected.length>=1&&(n.ctrlKey||n.metaKey||t.multiDragEvent()),i.cancel(),!1;n.ctrlKey||n.metaKey||t.clearSelection()})).on("start",(function(e){e.area,e.inst,e.selected;var i=e.oe;i.ctrlKey||i.metaKey||t.clearSelection(),t.selectionArea.select.state=!0})).on("move",(function(e){var i=e.inst,n=e.oe,a=e.area,o=e.changed;o.removed,o.added;n.ctrlKey||n.metaKey||t.clearSelection();var s={x:a.getBoundingClientRect().x-i._targetBoundary.x+i._targetContainer.scrollLeft*t.editScale,y:a.getBoundingClientRect().y-i._targetBoundary.y+i._targetContainer.scrollTop*t.editScale,w:a.getBoundingClientRect().width,h:a.getBoundingClientRect().height},r={x:Math.floor(s.x/t.scaleWidgetSize),y:Math.floor(s.y/t.scaleWidgetSize),w:Math.floor((s.x%t.scaleWidgetSize+s.w)/t.scaleWidgetSize),h:Math.floor((s.y%t.scaleWidgetSize+s.h)/t.scaleWidgetSize)};t.selectWidgetByRange(r.x,r.y,r.w,r.h)})).on("stop",(function(e){e.inst;t.selectionArea.select.state=!1,t.makeMultiDragRec(),t.makeMultiDragComps()}))},methods:{makeMultiDragRec:function(){var t=Math.min.apply(Math,Object(s["a"])(this.widgetSelectedWithUnLock.map((function(t){return t.y})))),e=Math.min.apply(Math,Object(s["a"])(this.widgetSelectedWithUnLock.map((function(t){return t.x})))),i=Math.max.apply(Math,Object(s["a"])(this.widgetSelectedWithUnLock.map((function(t){return t.y+t.h-1})))),n=Math.max.apply(Math,Object(s["a"])(this.widgetSelectedWithUnLock.map((function(t){return t.x+t.w-1})))),a=n-e+1,o=i-t+1;this.multiDragRec={top:t,left:e,bottom:i,right:n,width:a,height:o}},makeMultiDragComps:function(){var t=this,e=Object(l["d"])(this.widgetSelectedWithUnLock);e.forEach((function(e){e.x=e.x-t.multiDragRec.left,e.y=e.y-t.multiDragRec.top})),this.multiDragComps=e},openContextmenu:function(t){this.$refs.contextmenuAll.hide(),this.contextmenu.lock.isLockShow=!1,this.contextmenu.lock.isUnlockShow=!1,0!==this.widgetSelectedWithLock.length&&(this.contextmenu.lock.isLockShow=!0),0!==this.widgetSelectedWithUnLock.length&&(this.contextmenu.lock.isUnlockShow=!0),console.log("openContextmenu",t);var e=this.$refs.layout.$el.getBoundingClientRect(),i={x:(t.pageX-e.x-(t.pageX-e.x)%this.scaleWidgetSize)/this.scaleWidgetSize,y:(t.pageY-e.y-(t.pageY-e.y)%this.scaleWidgetSize)/this.scaleWidgetSize};this.contextmenu=Object(h["a"])(Object(h["a"])({},this.contextmenu),i),console.log(this.contextmenu),""===this.whichWidgetInXY(i.x,i.y)?this.contextmenu.mode="blank":this.widgetSelected.length>1?this.contextmenu.mode="multi":this.contextmenu.mode="single",console.log(i);var n={top:t.pageY,left:t.pageX};this.$refs.contextmenuAll.show(n),t.stopPropagation(),t.preventDefault()},devPrintFilledArray:function(){var t=this,e=new Array(this.maxColNum).fill(0).map((function(){return new Array(t.maxRowNum).fill(0)}));this.widgetComps.forEach((function(t){for(var i=0;i<t.w;i++)for(var n=0;n<t.h;n++)e[t.x+i][t.y+n]=1}));for(var i="",n=0;n<this.maxRowNum;n++){for(var a=0;a<this.maxColNum;a++)i+=e[a][n]+" ";i+="\n"}console.log(i)},move:function(t,e,i){var n=this.widgetComps.find((function(e){return e.$id===t}));!1===n.$editProp.selected&&this.clearSelection(),this.isWidgetDragging=!0,this.selectionArea.isStopEvent=!0},resize:function(t,e,i,n,a){this.selectionArea.isStopEvent=!0},moved:function(t,e,i){this.selectionArea.isStopEvent=!1,this.addState(),this.isWidgetDragging=!1},resized:function(t,e,i,n,a){this.selectionArea.isStopEvent=!1,this.selectWidget([t]),this.addState()},containerResized:function(t,e,i,n,a){},layoutCreatedEvent:function(t){},layoutBeforeMountEvent:function(t){},layoutMountedEvent:function(t){},layoutReadyEvent:function(t){},layoutUpdatedEvent:function(t){this.selectionArea.isStopEvent=!1},removeWidget:function(t,e){e>-1&&this.widgetComps.splice(e,1),this.addState()},removeWidgetByIds:function(t){var e=this;t.length>0&&(t.forEach((function(t){var i=e.widgetComps.map((function(t){return t.$id})),n=i.indexOf(t);n>-1&&e.widgetComps.splice(n,1)})),this.addState())},handleDragEnter:function(t){},handleDragOver:function(t){},handleDragLeave:function(t){},handleDragEnd:function(t){},calcXY:function(t,e){var i=this.$refs.dropLayer.getBoundingClientRect(),n=t-i.left,a=e-i.top,o=parseInt(((n-this.scaleWidgetSize/2)/this.scaleWidgetSize).toFixed(0)),s=parseInt(((a-this.scaleWidgetSize/2)/this.scaleWidgetSize).toFixed(0));return{positionX:o,positionY:s}},handleWidgetDrop:function(t){if(console.log("handleWidgetDrop",t),this.dragging){var e=this.calcXY(t.clientX,t.clientY),i=e.positionX,n=e.positionY,a=Object(f["c"])(this.dragging);if(this.isPreventCollision){var o=this.copyScan(i,n,a.$property._defaultWidth,a.$property._defaultHeight,50);o&&(i=o.x,n=o.y)}var s=Object(m["a"])(),r=Object(l["c"])({},Object(l["d"])(a),{i:s,x:i,y:n,w:a.$property._defaultWidth,h:a.$property._defaultHeight,minW:a.$property._minWidth,minH:a.$property._minHeight,$id:s,$property:{_name:"untitled_".concat(a.$type._typeId),_x:i,_y:n,_width:a.$property._defaultWidth,_height:a.$property._defaultHeight}});this.widgetComps.push(r),this.isWidgetInEditView(r.x,r.y,r.w,r.h,!0)||this.scrollToWidget(i,n),this.addState(),this.clearSelection(),this.selectWidget([r.$id]),this.devPrintFilledArray()}},openSettingModalFormContextMenu:function(t,e){var i=e.widgetItem;e.index;console.log(i)},opendeleteModal:function(t,e){var i=e.widgetItem,n=e.index;console.log(i),this.removeWidget(i,n)},openSettingModal:function(t){this.widgetItemSettingModal.isShow=!0,this.$set(this.widgetItemSettingModal,"itemData",Object(l["d"])(t)),console.log(this.widgetItemSettingModal)},saveWidgetItemSetting:function(){var t=this;console.log(this.widgetItemSettingModal);var e=this.widgetComps.findIndex((function(e){return e.$id===t.widgetItemSettingModal.itemData.$id}));this.$set(this.widgetComps[e],"$property",Object(l["d"])(this.widgetItemSettingModal.itemData.$property)),console.log(this.widgetItemSettingModal.itemData),this.widgetItemSettingModal.isShow=!1,this.addState()},selectWidgetByRange:function(t,e,i,n){var a=[];this.widgetComps.forEach((function(o){for(var s=o.x;s<o.x+o.w;s++)for(var r=o.y;r<o.y+o.h;r++)for(var l=t;l<=t+i;l++)for(var c=e;c<=e+n;c++)s===l&&r===c&&a.push(o.$id)})),this.clearSelection(),this.selectWidget(a)},lockWidgetContextmenu:function(){if(this.widgetSelected.length>0){var t=this.widgetSelected.map((function(t){return t.$id}));this.toggleWidgetLock(t,!0)}},unlockWidgetContextmenu:function(){if(this.widgetSelected.length>0){var t=this.widgetSelected.map((function(t){return t.$id}));this.toggleWidgetLock(t,!1)}},toggleWidgetLock:function(t,e){this.$store.commit("editor/TOGGLE_WIDGET_LOCK",{ids:t,locked:e}),this.addState()},selectAllWidget:function(){this.selectWidget(Object(s["a"])(this.widgetComps.map((function(t){return t.$id}))))},selectWidget:function(t){this.$store.state.editor.isSidebarOpen||this.$store.commit("editor/TOGGLE_SIDEBAR","open"),this.$store.commit("editor/SELECT_WIDGET",Object(s["a"])(t))},toggleWidgetByXY:function(t,e){var i=this.whichWidgetInXY(t,e);console.log(i);var n=this.widgetSelected.map((function(t){return t.$id})),a=n.indexOf(i);a>-1?(n.splice(a,1),this.clearSelection(),this.selectWidget(Object(s["a"])(n))):(this.clearSelection(),this.selectWidget([].concat(Object(s["a"])(n),[i]))),console.log(Object(s["a"])(n))},selectWidgetByXY:function(t,e){var i=this.whichWidgetInXY(t,e);this.selectWidget([i])},whichWidgetInXY:function(t,e){var i=this.gridComps.length,n=this.gridComps[0].length;return t<0||e<0||t>=i||e>=n?"":this.gridComps[t][e]},clearSelection:function(){this.$store.commit("editor/CLEAR_WIDGET_SELECTION")},getWidgetPropFromId:function(t){var e=this.widgetComps.findIndex((function(e){return e.$id===t}));return this.widgetComps[e]},isWidgetSelectedInXY:function(t,e){var i=this.whichWidgetInXY(t,e),n=this.getWidgetPropFromId(i);return console.log("whichWidget.$editProp.selected",n.$editProp.selected),n.$editProp.selected},isFitableWidgetInXY:function(t,e,i,n){for(var a=t;a<t+i;a++)for(var o=e;o<e+n;o++)if(""!==this.whichWidgetInXY(a,o)||a>=this.colNum)return!1;return!0},deleteWidgetContextmenu:function(){this.deleteWidget()},deleteWidget:function(){if(this.widgetSelected.length>0){var t=this.widgetSelected.map((function(t){return t.$id}));this.removeWidgetByIds(t)}},copyWidget:function(){console.log("copyWidget widget"),this.$store.commit("editor/SET_WIDGET_COPIED",{widgets:Object(l["d"])(Object(s["a"])(this.widgetSelected))})},getWidgetBounding:function(t){var e=Math.abs(Math.min.apply(Math,Object(s["a"])(t.map((function(t){return t.y}))))),i=Math.abs(Math.min.apply(Math,Object(s["a"])(t.map((function(t){return t.x}))))),n=Math.abs(Math.max.apply(Math,Object(s["a"])(t.map((function(t){return t.y+t.h-1}))))),a=Math.abs(Math.max.apply(Math,Object(s["a"])(t.map((function(t){return t.x+t.w-1}))))),o=Math.abs(a-i+1),r=Math.abs(n-e+1);return{top:e,left:i,bottom:n,right:a,width:o,height:r}},pasteWidget:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;if(console.log("paste widget"),!(this.widgetCopied.length<=0)){var i=this.getWidgetBounding(this.widgetCopied),n=[],a=0,o=0,s=i.top;t>-1&&e>-1&&(s=e);var r=!0;while(r){var c=0;for(t>-1&&e>-1?s===e&&(c=t):s===i.top&&(c=i.left);c<this.colNum;c++){var d=!0;a=c-i.left,o=s-i.top;var h,g=Object(u["a"])(this.widgetCopied);try{for(g.s();!(h=g.n()).done;){var p=h.value;if(!this.isFitableWidgetInXY(a+p.x,o+p.y,p.w,p.h)){d=!1;break}}}catch(M){g.e(M)}finally{g.f()}if(!0===d){r=!1;break}}s++}var f,v=[],_=Object(u["a"])(this.widgetCopied);try{for(_.s();!(f=_.n()).done;){var y=f.value,b=Object(m["a"])();v.push(b);var w=Object(l["c"])({},Object(l["d"])(y),{$id:b,i:b,x:y.x+a,y:y.y+o,w:y.w,h:y.h,$editProp:{selected:!1,disconnected:!1},$property:{_name:"untitled_".concat(y.$type._typeId),_x:y.x+a,_y:y.y+o}});n.push(w),this.widgetComps.push(w)}}catch(M){_.e(M)}finally{_.f()}var S=this.getWidgetBounding(n);if(!this.isWidgetInEditView(S.left,S.top,1,1,!1)||!this.isWidgetInEditView(S.left+S.width,S.top+S.height,1,1,!1)){var x=document.getElementById("content"),C=x.getBoundingClientRect(),$={Xmin:x.scrollLeft,Xmax:x.scrollLeft+C.width,Ymin:x.scrollTop,Ymax:x.scrollTop+C.height},k={Xmin:this.toTruePosPixel(S.left),Xmax:this.toTruePosPixel(S.left)+this.toTrueSizePixel(S.width),Ymin:this.toTruePosPixel(S.top),Ymax:this.toTruePosPixel(S.top)+this.toTrueSizePixel(S.height)},E=0,W=0;$.Xmin-k.Xmin>=0?E=-($.Xmin-k.Xmin):k.Xmax-$.Xmax>=0&&(E=k.Xmax-$.Xmax),$.Ymin-k.Ymin>=0?W=-($.Ymin-k.Ymin):k.Ymax-$.Ymax>=0&&(W=k.Ymax-$.Ymax),setTimeout((function(){Object(l["f"])(x,W+$.Ymin,250)}),0),setTimeout((function(){Object(l["e"])(x,E+$.Xmin,250)}),0)}return this.clearSelection(),this.selectWidget([]),this.selectWidget([].concat(v)),this.addState(),!0}},scrollToWidget:function(t,e){var i=document.getElementById("content"),n=(this.defaultWidgetSize+this.defaultWidgetMargin)*e+this.defaultWidgetMargin,a=(this.defaultWidgetSize+this.defaultWidgetMargin)*t+this.defaultWidgetMargin;setTimeout((function(){Object(l["f"])(i,n,250)}),0),setTimeout((function(){Object(l["e"])(i,a,250)}),0)},copyWidgetContextmenu:function(){this.copyWidget()},pasteWidgetContextmenu:function(){console.log("this.contextmenu.x, this.contextmenu.y",this.contextmenu.x,this.contextmenu.y),this.pasteWidget(this.contextmenu.x,this.contextmenu.y)},cloneWidget:function(t,e){var i=this.widgetCopied[0],n=Object(m["a"])(),a={};if(a=t>-1&&e>-1?{x:t,y:e}:this.copyScan(i.x,i.y,i.w,i.h,50),a){var o=Object(l["c"])({},Object(l["d"])(i),{$id:n,i:n,x:a.x,y:a.y,w:i.w,h:i.h,$editProp:Object(f["d"])(),$property:{_x:a.x,_y:a.y}});return this.widgetComps.push(o),this.addState(),!0}return!1},toTruePosPixel:function(t){return(this.defaultWidgetSize+this.defaultWidgetMargin)*t+this.defaultWidgetMargin},toTrueSizePixel:function(t){return(this.defaultWidgetSize+this.defaultWidgetMargin)*t},isWidgetInEditView:function(t,e,i,n,a){var o=document.getElementById("content"),s=o.getBoundingClientRect(),r={x:o.scrollLeft,y:o.scrollTop,w:s.width,h:s.height},l={x:(this.defaultWidgetSize+this.defaultWidgetMargin)*t+this.defaultWidgetMargin,y:(this.defaultWidgetSize+this.defaultWidgetMargin)*e+this.defaultWidgetMargin,w:i*this.defaultWidgetSize,h:n*this.defaultWidgetSize};return console.log(l),a?l.x>=r.x&&l.y>=r.y&&l.x+l.w<=r.x+r.w&&l.y+l.h<=r.y+r.h:l.x>=r.x&&l.x<=r.x+r.w&&l.y>=r.y&&l.y<=r.y+r.h||l.x+l.w>=r.x&&l.x+l.w<=r.x+r.w&&l.y>=r.y&&l.y<=r.y+r.h||l.x>=r.x&&l.x<=r.x+r.w&&l.y+l.h>=r.y&&l.y+l.h<=r.y+r.h||l.x+l.w>=r.x&&l.x+l.w<=r.x+r.w&&l.y+l.h>=r.y&&l.y+l.h<=r.y+r.h},copyScan:function(t,e,i,n,a){for(var o=e;o<a;o++){var s=0;for(o===e&&(s=t);s<this.colNum;s++)if(this.isFitableWidgetInXY(s,o,i,n))return{x:s,y:o,w:i,h:n}}return!1},addState:function(){this.$store.commit("editor/ADD_STATE")},eventInit:function(){this.panMove.isPanMode=!1,this.selectionArea.isStopEvent=!1,this.clearSelection(),this.selectWidget([])},eventKeydown:function(t){if("input"!==t.target.nodeName.toLowerCase()&&"textarea"!==t.target.nodeName.toLowerCase())switch(t.keyCode){case 32:this.panMove.isPanMode=!0,this.selectionArea.isStopEvent=!0,t.stopPropagation(),t.preventDefault();break;case 8:case 46:if(console.log(this.widgetSelected),this.widgetSelected.length>0){var e=this.widgetSelected.map((function(t){return t.$id}));this.removeWidgetByIds(e)}break;default:}},eventKeyup:function(t){if("input"!==t.target.nodeName.toLowerCase())switch(t.keyCode){case 32:this.panMove.isPanMode=!1,this.selectionArea.isStopEvent=!1,t.stopPropagation(),t.preventDefault();break;default:}},eventDocumentMouseDown:function(t){if(this.widgetSelected.length>1){var e=document.getElementById("content").scrollTop,i=document.getElementById("content").scrollLeft;this.scrollInitY=e,this.makeMultiDragRec(),this.makeMultiDragComps(),this.multiDrag.inOffsetY=this.scaleCoordinate(t.pageY)-this.layoutDom.offsetY-this.defaultGridSize*parseInt(this.multiDragRec.top)+this.scaleCoordinate(e),this.multiDrag.inOffsetX=this.scaleCoordinate(t.pageX)-this.layoutDom.offsetX-this.defaultGridSize*parseInt(this.multiDragRec.left)+this.scaleCoordinate(i),this.multiDrag.top=this.scaleCoordinate(t.pageY)-this.layoutDom.offsetY-this.multiDrag.inOffsetY+this.scaleCoordinate(e),this.multiDrag.left=this.scaleCoordinate(t.pageX)-this.layoutDom.offsetX-this.multiDrag.inOffsetX+this.scaleCoordinate(i)}return!1},eventDocumentMouseMove:function(t){return this.widgetSelected.length>1&&this.multiDrag.isDragging&&(this.scrollDeltaY=document.getElementById("content").scrollTop-this.scrollInitY,this.multiDrag.top=this.scaleCoordinate(t.pageY)-this.layoutDom.offsetY-this.multiDrag.inOffsetY+this.scaleCoordinate(this.scrollInitY)+this.scrollDeltaY,this.multiDrag.left=this.scaleCoordinate(t.pageX)-this.layoutDom.offsetX-this.multiDrag.inOffsetX+this.scaleCoordinate(document.getElementById("content").scrollLeft)),!1},eventDocumentMouseUp:function(t){return this.multiDrag.isDragging=!1,!1},eventMousedown:function(t){return!this.panMove.drag.state&&this.panMove.isPanMode&&(this.panMove.drag.x=t.pageX,this.panMove.drag.y=t.pageY,this.panMove.drag.startX=t.pageX,this.panMove.drag.startY=t.pageY,this.panMove.drag.state=!0),!1},eventMousemove:function(t){if(this.panMove.drag.state&&this.panMove.isPanMode){var e=document.getElementById("content").scrollLeft-t.pageX+this.panMove.drag.x,i=document.getElementById("content").scrollTop-t.pageY+this.panMove.drag.y;document.getElementById("content").scrollLeft=e>0?e:0,document.getElementById("content").scrollTop=i>0?i:0,this.panMove.drag.x=t.pageX,this.panMove.drag.y=t.pageY}return!1},eventMouseup:function(t){return this.panMove.drag.state&&(this.panMove.drag.state=!1),this.selectionArea.select.state&&(this.selectionArea.select.state=!1),this.multiDrag.isDragging=!1,!1},multiDragEvent:function(){console.log(this.widgetSelected),this.multiDrag.isDragging=!0,console.log("this.multiDrag.isDragging",this.multiDrag.isDragging)},scaleCoordinate:function(t){return t/this.editScale}}},B=Y,N=(i("6115"),i("9ff1"),i("2877")),X=Object(N["a"])(B,c,d,!1,null,"41ed3082",null),G=X.exports,F=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticStyle:{height:"100%","overflow-y":"auto","background-color":"#FFF"}},[i("div",{staticClass:"search-panel"},[i("div",{staticClass:"widget-search"},[i("span",{staticClass:"icon"},[i("svg-icon",{attrs:{"icon-class":"search"}})],1),i("input",{directives:[{name:"model",rawName:"v-model",value:t.terms,expression:"terms"}],attrs:{type:"text",placeholder:t.$t("Widget.keywords")},domProps:{value:t.terms},on:{input:function(e){e.target.composing||(t.terms=e.target.value)}}})])]),i("div",{staticClass:"content"},[i("div",{staticClass:"content__tab"},[i("el-tabs",{staticStyle:{height:"200px"},attrs:{"tab-position":"left"},on:{"tab-click":t.handleCompTabChange},model:{value:t.activeCompTab,callback:function(e){t.activeCompTab=e},expression:"activeCompTab"}},[i("el-tab-pane",{attrs:{name:"line"}},[i("span",{attrs:{slot:"label"},slot:"label"},[i("svg-pic",{attrs:{"icon-class":"line"}})],1)]),i("el-tab-pane",{attrs:{name:"bar"}},[i("span",{attrs:{slot:"label"},slot:"label"},[i("svg-pic",{attrs:{"icon-class":"bar"}})],1)]),i("el-tab-pane",{attrs:{name:"pie"}},[i("span",{attrs:{slot:"label"},slot:"label"},[i("svg-pic",{attrs:{"icon-class":"pie"}})],1)]),i("el-tab-pane",{attrs:{name:"scatter"}},[i("span",{attrs:{slot:"label"},slot:"label"},[i("svg-pic",{attrs:{"icon-class":"scatter"}})],1)]),i("el-tab-pane",{attrs:{name:"radar"}},[i("span",{attrs:{slot:"label"},slot:"label"},[i("svg-pic",{attrs:{"icon-class":"radar"}})],1)])],1)],1),i("div",{staticClass:"content__comp"},[i("div",{staticClass:"tools-container"},[i("div",{staticClass:"tools"},[t._l(t.filterList,(function(e,n){return i("div",{key:n,staticStyle:{"text-align":"center"}},[i("div",{staticClass:"tools__item",attrs:{id:e.$template,draggable:!0},on:{dragstart:function(i){return t.dragStart(e.$type._typeId,i,e)},dragover:function(t){t.preventDefault()},dragend:t.dragEnd}},[i("div",{staticClass:"wrapper"},[i("div",{staticClass:"tools__item__title-text"},[t._v(" "+t._s(e.$type._title)+" ")]),i("div",{staticClass:"tools__item__image"},[i(e.$type._template,{tag:"component",style:{height:e.$property._defaultHeight*t.defaultWidgetSize+"px",width:e.$property._defaultWidth*t.defaultWidgetSize+"px"},attrs:{config:t.components[e.$type._typeId]}})],1),i("div",{staticClass:"drag-image"},[i("div",{attrs:{id:"widget-"+e.$type._typeId}},[i(e.$type._template,{tag:"component",staticClass:"dragging-ghost",style:{height:e.$property._defaultHeight*t.defaultWidgetSize+"px",width:e.$property._defaultWidth*t.defaultWidgetSize+"px"},attrs:{config:t.components[e.$type._typeId]}})],1)])])])])})),0==t.filterList.length?i("div",{staticClass:"no-result"},[i("span",[t._v(t._s(t.$t("Widget.No_result"))+" ")])]):t._e()],2)])])])])},U=[],H={name:"Items",data:function(){return{activeCompTab:"line",terms:"",componentsArray:f["b"],components:f["a"]}},computed:{editScale:function(){return this.$store.state.editor.viewOption.editScale},defaultWidgetSize:function(){return this.$store.state.editor.defaultWidgetSize},isDragging:function(){return this.$store.editor.dragging>-1},filterList:function(){var t=this;return!this.terms||this.terms.length<2?this.componentsArray:this.componentsArray.filter((function(e){for(var i,n=e.$type._title.toLowerCase(),a=0,o=-1,s=t.terms.toLowerCase();i=s[a++];)if(!~(o=n.indexOf(i,o+1)))return!1;return!0}))}},mounted:function(){return Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)})))()},methods:{handleCompTabChange:function(t,e){console.log(t,e)},dragStart:function(t,e,i){e.dataTransfer.dropEffect="move",this.$store.commit("editor/SET_DRAGGING",t),e.target.classList.add("tools__item--isdragging"),console.log(t);var n=null!=e.target?e.target:e.srcElement,a=document.querySelector("#widget-".concat(i.$type._typeId)).cloneNode(!0);a.setAttribute("id",Object(m["a"])()),a.className=n.className;var o=i.$property._defaultWidth*this.defaultWidgetSize,s=i.$property._defaultHeight*this.defaultWidgetSize;a.style.width=o+"px",a.style.height=s+"px",a.style.position="absolute";var r=a.getElementsByClassName("dragging-ghost")[0];r.style.backgroundColor="#ffffffA5",r.style.transform="scale(".concat(this.editScale,")"),r.style.transformOrigin="top left",r.style.border="solid 1px #ccc",document.body.appendChild(a),e.dataTransfer.setDragImage(a,10,10)},dragEnd:function(t){this.$store.commit("editor/SET_DRAGGING",""),t.target.classList.remove("tools__item--isdragging"),document.body.removeChild(document.body.lastChild)}}},K=H,V=(i("d636"),Object(N["a"])(K,F,U,!1,null,"3319b5c2",null)),J=V.exports,q=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticStyle:{height:"100%","overflow-y":"auto"}},[i("div",{staticStyle:{"max-height":"30vh","overflow-y":"auto",width:"235px","margin-left":"15px"}},[i("Container",{attrs:{"lock-axis":"y"},on:{drop:t.onDrop}},t._l(t.widgetComps,(function(e){return i("Draggable",{key:e.$id},[i("div",{staticClass:"draggable-item",class:{"draggable-item__selected":e.$editProp.selected},on:{click:function(i){return t.selectWidget(e)}}},[i("i",{staticClass:"fa fa-file-photo-o",attrs:{"aria-hidden":"true"}}),t._v(" "+t._s(e.$property["_name"])+" ")])])})),1)],1),i("div",{staticClass:"widget-total"},[t._v("widgets: "+t._s(t.widgetComps.length))])])},Z=[],Q=i("3f7d"),tt={name:"Layer",components:{Container:Q["Container"],Draggable:Q["Draggable"]},computed:{widgetComps:{get:function(){return this.$store.state.editor.editFile.content[this.$store.state.editor.currentTabIndex].components},set:function(t){this.$store.commit("editor/SET_WIDGET_COMPONENT",t)}},widgetLayout:function(){return this.$store.getters["editor/widgetLayout"]}},mounted:function(){return Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)})))()},methods:{selectWidget:function(t){this.clearSelection(),this.$store.commit("editor/TOGGLE_SIDEBAR","open"),this.$store.commit("editor/SELECT_WIDGET",[t.$id])},clearSelection:function(){this.$store.commit("editor/CLEAR_WIDGET_SELECTION")},onDrop:function(t){this.widgetComps=this.applyDrag(this.widgetComps,t),this.addState()},addState:function(){this.$store.commit("editor/ADD_STATE")},applyDrag:function(t,e){var i=e.removedIndex,n=e.addedIndex,a=e.payload;if(null===i&&null===n)return t;var o=Object(s["a"])(t),r=a;return null!==i&&(r=o.splice(i,1)[0]),null!==n&&o.splice(n,0,r),o}}},et=tt,it=(i("e2ba"),Object(N["a"])(et,q,Z,!1,null,"3fb8a42c",null)),nt=it.exports,at=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"pages-containner"},[i("div",{staticClass:"pages"},[i("Container",{staticStyle:{"margin-top":"15px"},attrs:{"lock-axis":"y"},on:{drop:t.onDrop}},t._l(t.pageTabs,(function(e,n){return i("Draggable",{key:e.id},[i("div",{staticClass:"page-item",class:{"page-item__selected":t.pageTabs[t.currentTabIndex].id===e.id},on:{click:function(e){return t.selectPage(n)}}},[t.pageTabs[t.currentTabIndex].id===e.id?i("div",{staticClass:"page-item__icon"},[i("i",{staticClass:"fa fa-square",attrs:{"aria-hidden":"true"}})]):i("div",{staticClass:"page-item__icon"},[i("i",{staticClass:"fa fa-square-o",attrs:{"aria-hidden":"true"}})]),i("div",{staticClass:"page-item__text"},[t._v(" "+t._s(e.label)+" ")]),t.pageTabs[t.currentTabIndex].id===e.id?i("div",{staticClass:"edit-tool"},[i("div",{staticClass:"edit-tool__edit",on:{click:function(i){return t.editPageName(e)}}},[i("svg-icon",{attrs:{"icon-class":"pencil"}})],1),i("el-popconfirm",{attrs:{title:t.$t("Page.delete_page_confirm_msg"),"confirm-button-text":t.$t("Page.delete_page_confirm_msg_yes"),"cancel-button-text":t.$t("Page.delete_page_confirm_msg_cancel"),"hide-icon":!0},on:{confirm:function(i){return t.removePage(e,n)}}},[i("div",{staticClass:"edit-tool__delete",attrs:{slot:"reference"},slot:"reference"},[i("svg-icon",{attrs:{"icon-class":"trash"}})],1)])],1):t._e()])])})),1)],1),i("div",{staticClass:"float-tool "},[i("div",{staticClass:"button-add",on:{click:t.addTab}},[t._v("+")])]),i("div",{staticClass:"total-box"},[t._v(t._s(t.pageTabs.length)+" / 5")]),i("Modal",{attrs:{"is-show":t.isEditorModalShow,width:400},on:{close:function(e){t.isEditorModalShow=!1}},scopedSlots:t._u([{key:"header",fn:function(){return[t._v("edit page name")]},proxy:!0},{key:"content",fn:function(){return[i("el-input",{model:{value:t.editPage.label,callback:function(e){t.$set(t.editPage,"label",e)},expression:"editPage.label"}})]},proxy:!0},{key:"footer",fn:function(){return[i("div",{staticStyle:{"text-align":"right",padding:"0 15px"}},[i("el-button",{staticClass:"original-style",staticStyle:{"min-width":"80px"},on:{click:t.canceSavePageNameModal}},[t._v("Cancel")]),i("el-button",{staticClass:"original-style",staticStyle:{"min-width":"80px"},on:{click:t.savePageNameModal}},[t._v("Ok")])],1)]},proxy:!0}])})],1)},ot=[],st={name:"Pages",components:{Container:Q["Container"],Draggable:Q["Draggable"],Modal:r["a"]},data:function(){return{editPage:{},isEditorModalShow:!1}},computed:{pageTabs:{get:function(){return this.$store.state.editor.editFile.content.map((function(t){return{label:t.label,id:t.id,closable:!1}}))},set:function(t){this.$store.commit("editor/SET_PAGE_POS",t)}},currentTabIndex:function(){return this.$store.state.editor.currentTabIndex}},mounted:function(){return Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)})))()},methods:{addTab:function(){this.pageTabs.length<5&&(this.$store.commit("editor/ADD_PAGE_TAB"),this.addState())},editPageName:function(t){this.editPage=Object(l["d"])(t),this.isEditorModalShow=!0},removePage:function(t,e){if(this.pageTabs.length>1){console.log(t),this.$store.commit("editor/REMOVE_PAGE_TAB",{id:t.id});var i=e-1<0?0:e-1;this.selectPage(i),this.addState()}else this.$message.error("Forbidden!!")},savePageNameModal:function(){var t={label:this.editPage.label};this.$store.commit("editor/UPDATE_PAGE_TAB_PROPS",{tab:t,id:this.editPage.id}),this.addState(),this.isEditorModalShow=!1},canceSavePageNameModal:function(){this.editPage={},this.isEditorModalShow=!1},selectPage:function(t){this.$store.commit("editor/SWITCH_CURRENT_TAB",{index:t})},clearSelection:function(){},changeLabel:function(t,e){},onDrop:function(t){var e=t.addedIndex;this.pageTabs=this.applyDrag(this.pageTabs,t),this.selectPage(e),this.addState()},addState:function(){this.$store.commit("editor/ADD_STATE")},applyDrag:function(t,e){var i=e.removedIndex,n=e.addedIndex,a=e.payload;if(null===i&&null===n)return t;var o=Object(s["a"])(t),r=a;return null!==i&&(r=o.splice(i,1)[0]),null!==n&&o.splice(n,0,r),o}}},rt=st,lt=(i("6f66"),Object(N["a"])(rt,at,ot,!1,null,"4dfee10d",null)),ct=lt.exports,dt=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"att-container"},[i("side-tab",{attrs:{title:[t.$t("Widget.Style")],direction:"right"}},[i("div",{staticStyle:{"background-color":"#fff"},attrs:{slot:"first"},slot:"first"},[i("div",{staticClass:"style-panel",staticStyle:{padding:"10px 0","margin-top":"10px"}},[i("div",{staticClass:"style-panel__header"},[i("div",{staticClass:"style-panel__header__wrapper",on:{click:function(e){t.collapse.screen=!t.collapse.screen}}},[i("div",{staticClass:"style-panel__header__collapse"},[t.collapse.screen?i("i",{staticClass:"el-icon-arrow-up"}):i("i",{staticClass:"el-icon-arrow-down"})]),i("div",{staticClass:"style-panel__header__title"},[t._v(" "+t._s(t.$t("Widget_Attribute.Viewport"))+" ")])]),i("div",{staticClass:"style-panel__header__tools"})]),t.collapse.screen?t._e():i("div",{staticClass:"style-panel__content"},[i("div",{staticClass:"style-item"},[i("div",{staticClass:"style-item__text",staticStyle:{height:"30px","line-height":"30px"},attrs:{title:t.$t("Widget_Attribute.Auto")}},[i("div",{staticClass:"att-checkbox-title"},[i("el-checkbox",{on:{change:t.setAuxiliaryLineDefault},model:{value:t.dashboard.auxiliaryLine.isAuto,callback:function(e){t.$set(t.dashboard.auxiliaryLine,"isAuto",e)},expression:"dashboard.auxiliaryLine.isAuto"}},[t._v(t._s(t.$t("Widget_Attribute.Auto")))])],1)])]),i("div",{staticClass:"style-item"},[i("div",{staticClass:"style-item__text",attrs:{title:t.$t("Widget_Attribute.Position")}},[t._v(" "+t._s(t.$t("Widget_Attribute.Position"))+" ")]),i("div",{staticClass:"style-item__content",staticStyle:{"margin-left":"20px"}},[i("div",{staticClass:"style-item__content__icon-prefix",staticStyle:{"margin-left":"-18px"}},[i("svg-icon",{attrs:{"icon-class":"lock"}})],1),i("div",{staticClass:"att-input-unit",staticStyle:{"margin-right":"12px"}},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.dashboard.auxiliaryLine.width,expression:"dashboard.auxiliaryLine.width"}],attrs:{type:"text",disabled:t.dashboard.auxiliaryLine.isAuto},domProps:{value:t.dashboard.auxiliaryLine.width},on:{input:function(e){e.target.composing||t.$set(t.dashboard.auxiliaryLine,"width",e.target.value)}}}),i("div",{staticClass:"unit"},[t._v("w")])]),i("div",{staticClass:"att-input-unit",staticStyle:{"margin-right":"12px"}},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.dashboard.auxiliaryLine.height,expression:"dashboard.auxiliaryLine.height"}],attrs:{type:"text",disabled:t.dashboard.auxiliaryLine.isAuto},domProps:{value:t.dashboard.auxiliaryLine.height},on:{input:function(e){e.target.composing||t.$set(t.dashboard.auxiliaryLine,"height",e.target.value)}}}),i("div",{staticClass:"unit"},[t._v("h")])])])])])])])])],1)},ut=[],ht=i("ddf6"),gt={name:"PageAttr",components:{sideTab:ht["a"]},props:{dashboard:{type:Object,default:function(){return{}}}},data:function(){return{collapse:{dataSource:!1,style:!1,screen:!1}}},mounted:function(){},methods:{setWidgetValue:function(t){this.$emit("save",Object(l["d"])(this.dashboard))},setAuxiliaryLineDefault:function(t){t&&this.$store.commit("editor/UPDATE_PAGE_ATTR_AUXILIARY_LINE",{height:window.screen.height,width:window.screen.width,isAuto:!0})}}},pt=gt,ft=Object(N["a"])(pt,dt,ut,!1,null,"2a584afa",null),mt=ft.exports,vt=i("2340"),_t=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("el-popover",{attrs:{placement:"top-start",trigger:"click","visible-arrow":!1,offset:-12,"popper-class":"lang-select-popover"},model:{value:t.visible,callback:function(e){t.visible=e},expression:"visible"}},[i("span",{staticClass:"international",attrs:{slot:"reference",text:t.languageList.filter((function(e){return e.name==t.language}))[0].label},slot:"reference"},[i("svg-icon",{attrs:{"icon-class":"language"}}),t._v(" "+t._s(t.languageList.filter((function(e){return e.name==t.language}))[0].label)+" ")],1),i("div",{staticClass:"popper-container"},t._l(t.languageList,(function(e,n){return i("div",{key:n,staticClass:"popper-item",on:{click:function(i){return t.handleSetLanguage(e.name)}}},[t._v(" "+t._s(e.label)+" ")])})),0)])},yt=[],bt=i("9923"),wt={name:"LangPopover",components:{},data:function(){return{visible:!1,languageList:bt["c"]}},computed:{language:function(){return this.$store.getters.language}},methods:{handleSetLanguage:function(t){this.$i18n.locale=t,this.$store.dispatch("app/setLanguage",t),this.visible=!1,this.$message({message:this.$t("App.Modified_language_successfully"),type:"success",duration:5e3})}}},St=wt,xt=(i("cf20"),Object(N["a"])(St,_t,yt,!1,null,null,null)),Ct=xt.exports,$t=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"loadEffect"},[i("div",{staticClass:"loading"},[i("svg-pic",{staticClass:"logo pulse",attrs:{"icon-class":"logo"}})],1)])},kt=[],Et={name:"SplashScreen"},Wt=Et,Mt=(i("ac80"),Object(N["a"])(Wt,$t,kt,!1,null,"acfb6bb0",null)),Tt=Mt.exports,At={name:"App",components:{workArea:G,widgets:J,layer:nt,Modal:r["a"],sideTab:ht["a"],pages:ct,VueFileToolbarMenu:vt["a"],pageAttr:mt,LangSelectPopover:Ct,SplashScreen:Tt},data:function(){return{pageTab:"",isLoading:!0,isSidePanelShow:!0,isEditorModalShow:!1,autoSave:{isEnabled:!1,intervalTimer:null,lastUpdateTime:null,interval:30},assetsSelection:{isModalShow:!1,selectedWidget:{},selectedAsset:{}},tempJson:{},fullscreen:!1,rulerMarker:Object(s["a"])(Array(100).keys())}},computed:{widgetSelectedWithLock:function(){return this.$store.getters["editor/widgetSelected"].filter((function(t){return!0===t.$editProp.locked}))},widgetSelectedWithUnLock:function(){return this.$store.getters["editor/widgetSelected"].filter((function(t){return!1===t.$editProp.locked}))},widgetCopied:function(){return this.$store.state.editor.widgetCopied},widgetSelected:function(){return this.$store.getters["editor/widgetSelected"]},pageTabs:function(){return this.$store.state.editor.editFile.content.map((function(t){return{label:t.label,id:t.id}}))},pageAttrAuxiliaryLine:{get:function(){return this.editFile.content[this.currentTabIndex].auxiliaryLine},set:function(t){this.$store.commit("editor/UPDATE_PAGE_ATTR_AUXILIARY_LINE",t)}},isUndoEnabled:function(){return this.$store.getters["editor/isUndoEnabled"]},isRedoEnabled:function(){return this.$store.getters["editor/isRedoEnabled"]},isSidebarOpen:function(){return this.$store.state.editor.isSidebarOpen},editFile:function(){return this.$store.state.editor.editFile},currentTabIndex:function(){return this.$store.state.editor.currentTabIndex},singleSelected:function(){return console.log(this.editFile),this.editFile.content.length>0&&Object(l["a"])(1===this.editFile.content[this.currentTabIndex].components.filter((function(t){return!0===t.$editProp.selected})).length,"boolean")},editScale:{get:function(){return this.$store.state.editor.viewOption.editScale},set:function(t){var e={editScale:t,isGrid:this.$store.state.editor.viewOption.isGrid,isRuler:this.$store.state.editor.viewOption.isRuler,isAuxiliaryLine:this.$store.state.editor.viewOption.isAuxiliaryLine};this.$store.commit("editor/SET_VIEW_OPTION",e)}},isGridShow:{get:function(){return this.$store.state.editor.viewOption.isGrid},set:function(t){var e={editScale:this.$store.state.editor.viewOption.editScale,isGrid:t,isRuler:this.$store.state.editor.viewOption.isRuler,isAuxiliaryLine:this.$store.state.editor.viewOption.isAuxiliaryLine};this.$store.commit("editor/SET_VIEW_OPTION",e)}},isRulerShow:{get:function(){return this.$store.state.editor.viewOption.isRuler},set:function(t){var e={editScale:this.$store.state.editor.viewOption.editScale,isGrid:this.$store.state.editor.viewOption.isGrid,isRuler:t,isAuxiliaryLine:this.$store.state.editor.viewOption.isAuxiliaryLine};this.$store.commit("editor/SET_VIEW_OPTION",e)}},isAuxiliaryLineShow:{get:function(){return this.$store.state.editor.viewOption.isAuxiliaryLine},set:function(t){var e={editScale:this.$store.state.editor.viewOption.editScale,isGrid:this.$store.state.editor.viewOption.isGrid,isRuler:this.$store.state.editor.viewOption.isRuler,isAuxiliaryLine:t};this.$store.commit("editor/SET_VIEW_OPTION",e)}},menu:function(){var t=this;return[{text:this.$t("Project_Editor.File"),menu:[]},{text:this.$t("Project_Editor.Edit"),menu:[{text:this.$t("Project_Editor.Undo"),disabled:!this.isUndoEnabled||this.isWidgetInnerEditMode,click:function(){return t.$store.dispatch("editor/undo")}},{text:this.$t("Project_Editor.Redo"),disabled:!this.isRedoEnabled||this.isWidgetInnerEditMode,click:function(){return t.$store.dispatch("editor/redo")}}]},{text:this.$t("Project_Editor.View"),menu:[{text:this.$t("Project_Editor.ZoomIn"),disabled:this.editScale>=1.5,click:function(){return t.zoomIn()}},{text:this.$t("Project_Editor.ZoomOut"),disabled:this.editScale<=.5,click:function(){return t.zoomOut()}}]}]}},watch:{currentTabIndex:{handler:function(t,e){var i=this;t!==e&&this.$nextTick((function(){var t=i.$store.state.editor.currentTabIndex,e=i.$store.state.editor.editFile.content;console.log(e[t]),i.pageTab=e[t].id,i.pageAttrInit()}))},deep:!0},pageTabs:{deep:!0,handler:function(t,e){var i=this;t!==e&&this.$nextTick((function(){var t=i.$store.state.editor.currentTabIndex,e=i.$store.state.editor.editFile.content;i.pageTab=e[t].id}))}}},beforeDestroy:function(){this.$refs.content.removeEventListener("scroll",this.onScroll,!1),this.autoSave.intervalTimer&&clearInterval(this.autoSave.intervalTimer)},mounted:function(){var t=this;this.$refs.content.addEventListener("scroll",this.onScroll,!1),this.init(),this.autoSave.intervalTimer||(this.autoSave.intervalTimer=setInterval((function(){t.autoSave.isEnabled&&(t.autoSave.lastUpdateTime=t.moment().format("HH:mm:ss"),t.save())}),1e3*this.autoSave.interval))},methods:{init:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.isLoading=!0,e.next=3,t.$store.dispatch("editor/loadEditFile",t.$route.params.id);case 3:return console.log(t.$store.state.editor.editFile),t.pageTab=t.pageTabs[0].id||"",t.pageAttrInit(),e.next=8,new Promise((function(t){return setTimeout(t,1e3)}));case 8:t.isLoading=!1;case 9:case"end":return e.stop()}}),e)})))()},preview:function(){this.save(),this.$router.push({path:"/viewer"})},save:function(){this.$store.dispatch("editor/saveEditFile",{id:this.$route.params.id})},pageAttrInit:function(){"0"===this.pageAttrAuxiliaryLine.width&&"0"===this.pageAttrAuxiliaryLine.height&&(this.pageAttrAuxiliaryLine={height:window.screen.height,width:window.screen.width,isAuto:!0})},openDevModal:function(){this.tempJson=Object(l["d"])(this.editFile),this.isEditorModalShow=!0},saveDevModal:function(){this.$store.commit("editor/SET_EDIT_FILE",Object(l["d"])(this.tempJson)),this.isEditorModalShow=!1},canceDevlModal:function(){this.tempJson={},this.isEditorModalShow=!1},toggle:function(){this.$fullscreen.toggle(document.body,{wrap:!1})},fullscreenChange:function(t){this.fullscreen=t},saveDashboardPageSetting:function(t){},saveWidgetItemSetting:function(t){console.log(t);var e=this.editFile.content[this.currentTabIndex].components.findIndex((function(e){return e.$id===t.$id}));this.$set(this.editFile.content[this.currentTabIndex].components[e],"$property",Object(l["d"])(t.$property)),this.$set(this.editFile.content[this.currentTabIndex].components[e],"$dataSource",Object(l["d"])(t.$dataSource)),console.log(t),this.addState()},addState:function(){this.$store.commit("editor/ADD_STATE")},onScroll:function(){document.getElementById("rulerTop").scrollLeft=this.$refs.content.scrollLeft,document.getElementById("rulerLeft").scrollTop=this.$refs.content.scrollTop},openSelectAssetsModal:function(){this.assetsSelection.isModalShow=!0,this.assetsSelection.selectedWidget=this.widgetSelected[0]},updateAssetSelection:function(t){console.log(t),this.assetsSelection.selectedAsset=t},saveWidgetAssetsSelectedModal:function(){var t=this.assetsSelection.selectedWidget,e=this.assetsSelection.selectedAsset,i=this.editFile.content[this.currentTabIndex].components.findIndex((function(e){return e.$id===t.$id}));this.$set(this.editFile.content[this.currentTabIndex].components[i]["$property"],"assetStates",Object(l["d"])(e)),console.log(t),this.addState(),this.assetsSelection.isModalShow=!1},cancelWidgetAssetsSelectedModal:function(){this.assetsSelection.isModalShow=!1,this.assetsSelection.selectedWidget={},this.assetsSelection.selectedAsset={}},lockWidget:function(){0!==this.widgetSelectedWithUnLock.length&&this.$refs.workArea.lockWidgetContextmenu()},unlockWidget:function(){0!==this.widgetSelectedWithLock.length&&this.$refs.workArea.unlockWidgetContextmenu()},selectAllWidget:function(){this.$refs.workArea.selectAllWidget()},pasteWidget:function(){this.widgetCopied.length>0&&this.$refs.workArea.pasteWidget()},copyWidget:function(){console.log(this.widgetSelected.length),this.widgetSelected.length>0&&(this.$refs.workArea.copyWidget(),console.log(this.widgetCopied))},deleteWidget:function(){this.widgetSelected.length>0&&this.$refs.workArea.deleteWidget()},handleTabClick:function(t){this.$store.commit("editor/SWITCH_CURRENT_TAB",{index:parseInt(t.index)})},zoomIn:function(){this.editScale<1.5&&(this.editScale+=.25)},zoomOut:function(){this.editScale>.5&&(this.editScale-=.25)}}},Dt=At,Lt=(i("91a1"),i("2b00"),Object(N["a"])(Dt,n,a,!1,null,"0fdb00e1",null));e["default"]=Lt.exports},ac80:function(t,e,i){"use strict";i("6161")},cb03:function(t,e,i){},cb15:function(t,e,i){"use strict";var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("transition",{attrs:{name:"fade"}},[t.isShow?i("div",{staticClass:"modal-background modal-ap-info"},[i("div",{directives:[{name:"draggable",rawName:"v-draggable:dragable",arg:"dragable"}],staticClass:"modal ",style:{width:t.width+"px"}},[t.isLoading?i("div",{staticClass:"modal-loading"},[i("svg",{attrs:{viewBox:"0 0 120 30",xmlns:"http://www.w3.org/2000/svg"}},[i("circle",{attrs:{cx:"15",cy:"15",r:"15"}},[i("animate",{attrs:{attributeName:"r",from:"15",to:"15",begin:"0s",dur:"0.8s",values:"15;9;15",calcMode:"linear",repeatCount:"indefinite"}}),i("animate",{attrs:{attributeName:"fill-opacity",from:"1",to:"1",begin:"0s",dur:"0.8s",values:"1;.5;1",calcMode:"linear",repeatCount:"indefinite"}})]),i("circle",{attrs:{cx:"60",cy:"15",r:"9","fill-opacity":"0.3"}},[i("animate",{attrs:{attributeName:"r",from:"9",to:"9",begin:"0s",dur:"0.8s",values:"9;15;9",calcMode:"linear",repeatCount:"indefinite"}}),i("animate",{attrs:{attributeName:"fill-opacity",from:"0.5",to:"0.5",begin:"0s",dur:"0.8s",values:".5;1;.5",calcMode:"linear",repeatCount:"indefinite"}})]),i("circle",{attrs:{cx:"105",cy:"15",r:"15"}},[i("animate",{attrs:{attributeName:"r",from:"15",to:"15",begin:"0s",dur:"0.8s",values:"15;9;15",calcMode:"linear",repeatCount:"indefinite"}}),i("animate",{attrs:{attributeName:"fill-opacity",from:"1",to:"1",begin:"0s",dur:"0.8s",values:"1;.5;1",calcMode:"linear",repeatCount:"indefinite"}})])])]):t._e(),i("div",{staticClass:"close",on:{click:function(e){return t.$emit("close")}}},[i("i",{staticClass:"el-icon-close"})]),i("div",{staticClass:"modal-header",attrs:{id:"dragable"}},[t._t("header")],2),i("div",{staticClass:"modal-content"},[t._t("content")],2),i("div",{staticClass:"modal-buttons"},[t._t("footer")],2)])]):t._e()])],1)},a=[],o=(i("a9e3"),{name:"Modal",props:{width:{type:Number,default:400},isShow:{type:Boolean,default:!1},isLoading:{type:Boolean,default:!1}},data:function(){return{}}}),s=o,r=(i("2bac"),i("0db7"),i("2877")),l=Object(r["a"])(s,n,a,!1,null,"1808869a",null);e["a"]=l.exports},cf20:function(t,e,i){"use strict";i("e489")},d636:function(t,e,i){"use strict";i("8f46")},d920:function(t,e,i){},d97f:function(t,e,i){},ddf6:function(t,e,i){"use strict";var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"side-tab",class:{left:"left"===t.direction,right:"right"===t.direction}},[i("div",{staticClass:"side-tab__title",on:{click:t.toggleContent}},[i("div",{staticClass:"side-tab__title__text",class:{actived:"first"==t.actTab},on:{click:function(e){return e.stopPropagation(),t.tabClick("first")}}},[i("div",{staticClass:"label"},[t._v(t._s(t.title[0]||""))]),i("div",{staticClass:"line"})]),t.title.length>1?i("div",{staticClass:"side-tab__title__text",class:{actived:"second"==t.actTab},staticStyle:{"margin-left":"20px"},on:{click:function(e){return e.stopPropagation(),t.tabClick("second")}}},[i("div",{staticClass:"label"},[t._v(t._s(t.title[1]||""))]),i("div",{staticClass:"line"})]):t._e(),i("div",{staticClass:"side-tab__title__icon"},[t.isShowScoped?t._e():i("i",{staticClass:"fa fa-caret-left",attrs:{"aria-hidden":"true"}}),t.isShowScoped?i("i",{staticClass:"fa fa-caret-down",attrs:{"aria-hidden":"true"}}):t._e()])]),t.isShowScoped?i("div",{staticClass:"side-tab__content"},["first"==t.actTab?t._t("first"):t._e(),"second"==t.actTab?t._t("second"):t._e()],2):t._e()])},a=[],o={name:"SideTab",props:{title:{type:Array,default:function(){return[]}},isShow:{type:Boolean,default:!0},direction:{type:String,default:"left"}},data:function(){return{isShowScoped:!0,actTab:"first"}},watch:{isShow:{handler:function(t,e){t!==e&&(this.isShowScoped=t)},deep:!0}},methods:{toggleContent:function(){this.isShowScoped=!this.isShowScoped,this.$emit("update",!this.isShowScoped)},tabClick:function(t){this.actTab=t}}},s=o,r=(i("851b"),i("2877")),l=Object(r["a"])(s,n,a,!1,null,null,null);e["a"]=l.exports},e2ba:function(t,e,i){"use strict";i("6fb3")},e489:function(t,e,i){},e99a:function(t,e,i){}}]);