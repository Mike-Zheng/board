(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7c05591c"],{"13f0":function(t,e,i){},"1d40":function(t,e,i){},"3bc6":function(t,e,i){"use strict";i("1d40")},"6e6b":function(t,e,i){"use strict";i.r(e);var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"viewer-main"},[t.isLoading?i("div",{staticClass:"loading-data",attrs:{id:"loading"}},[t._m(0)]):t._e(),i("div",{staticClass:"viewer-main__content",attrs:{id:"content"}},[i("fullscreen",{ref:"fullscreen",staticClass:"container",attrs:{fullscreen:t.fullscreen,background:"#EEE"},on:{"update:fullscreen":function(e){t.fullscreen=e}}},[i("div",{staticClass:"viewer-page-tab"},[i("el-tabs",{attrs:{type:"card"},on:{"tab-click":t.handleTabClick},model:{value:t.pageTab,callback:function(e){t.pageTab=e},expression:"pageTab"}},t._l(t.pageTabs,(function(t){return i("el-tab-pane",{key:t.id,attrs:{label:t.label,name:t.id}})})),1)],1),t.isLoading?t._e():i("viewer")],1)],1),i("div",{staticClass:"fullscreen-fix"},[i("div",{staticClass:"up-button",on:{click:t.toggle}},[t._v("full screen")]),i("div",{staticClass:"down-button",on:{click:t.backToEditor}},[t._v("back to editor")])])])},a=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"loading-data__logo"},[i("ul",{staticClass:"loading-data__dot"},[i("li"),i("li"),i("li")])])}],r=(i("d81d"),i("96cf"),i("1da1")),s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"view-area-container"},[i("div",{staticClass:"grid-container",style:{width:t.colNum*t.defaultGridSize+10+"px"},attrs:{id:"viewArea"}},[i("div",{staticClass:"grid-viewer-area",attrs:{id:"viewer"},on:{dragover:function(t){t.stopPropagation(),t.preventDefault()}}},[i("grid-layout",{staticStyle:{width:"100%"},attrs:{layout:t.componentScope,"col-num":parseInt(t.colNum),"row-height":t.defaultWidgetSize,"is-draggable":!1,"is-resizable":!1,"prevent-collision":!0,"vertical-compact":!1,"use-css-transforms":!0,responsive:!1,margin:[10,10]}},t._l(t.componentScope,(function(e){return i("grid-item",{key:e.$id,attrs:{x:e.x,y:e.y,w:e.w,h:e.h,i:e.i}},[e.status?t._e():i("div",{staticClass:"status-mask"},[i("div",{staticClass:"inside-text"},[t._v("X")])]),i(e.$type._template,{tag:"component",attrs:{config:e,mode:"viewer"},on:{openSettingModal:t.openSettingModal}})],1)})),1)],1)])])},o=[],c=i("2909"),d=i("84c2"),l=i("1e6a"),u=i.n(l),p={name:"Viewer",components:{GridLayout:d["a"].GridLayout,GridItem:d["a"].GridItem},data:function(){return{imgGrid:u.a,dataSourceMapping:{},ws:null,componentScope:[]}},computed:{defaultWidgetSize:function(){return this.$store.state.editor.defaultWidgetSize},defaultGridSize:function(){return this.$store.state.editor.defaultWidgetSize+10},colNum:function(){return Math.max.apply(Math,Object(c["a"])(this.widgetComps.map((function(t){return t.x+t.w}))))},dataSourceMappingStr:function(){return this.dataSourceMapping?JSON.stringify(this.dataSourceMapping):""},widgetComps:function(){return this.$store.state.editor.editFile.content[this.$store.state.editor.currentTabIndex].components},editFile:function(){return this.$store.state.editor.editFile}},beforeDestroy:function(){this.ws&&(console.log("stop ws"),this.ws.close())},mounted:function(){this.init()},methods:{init:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.loading=!0,t.componentScope=Object(c["a"])(t.widgetComps),t.loading=!1;case 3:case"end":return e.stop()}}),e)})))()}}},f=p,g=(i("3bc6"),i("2877")),h=Object(g["a"])(f,s,o,!1,null,"18e61bfa",null),m=h.exports,b={name:"App",components:{viewer:m},data:function(){return{pageTab:"",isLoading:!0,isSidePanelShow:!0,tempJson:{},fullscreen:!1}},computed:{pageTabs:function(){return this.$store.state.editor.editFile.content.map((function(t){return{label:t.label,id:t.id}}))},editFile:function(){return this.$store.state.editor.editFile},screenWidth:function(){return this.editFile.content.screenWidth},screenHeight:function(){return this.editFile.content.screenHeight},currentTabIndex:function(){return this.$store.state.editor.currentTabIndex}},watch:{currentTabIndex:{handler:function(t,e){var i=this;t!==e&&this.$nextTick((function(){var t=i.$store.state.editor.currentTabIndex,e=i.$store.state.editor.editFile.content;console.log(e[t]),i.pageTab=e[t].id}))},deep:!0}},created:function(){},mounted:function(){this.init()},methods:{init:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.isLoading=!0,e.next=3,t.$store.dispatch("editor/loadEditFile",t.$route.params.id);case 3:t.pageTab=t.pageTabs[0].id||"",t.isLoading=!1;case 5:case"end":return e.stop()}}),e)})))()},toggle:function(){this.$refs["fullscreen"].toggle()},backToEditor:function(){this.$router.push({path:"/editor"})},fullscreenChange:function(t){this.fullscreen=t},handleTabClick:function(t){console.log(t),this.$store.commit("editor/SWITCH_CURRENT_TAB",{index:parseInt(t.index)})}}},v=b,w=(i("ce7a8"),Object(g["a"])(v,n,a,!1,null,"d7760006",null));e["default"]=w.exports},ce7a8:function(t,e,i){"use strict";i("13f0")}}]);